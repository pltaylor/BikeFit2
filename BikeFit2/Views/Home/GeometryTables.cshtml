@model BikeFit2.Models.ViewModels.GeometryTableViewModel

<div class="form-group">
    @Html.LabelFor(model => model.Manufacturer, new { @class = "control-label col-md-2" })
    <div class="col-md-4">
        @Html.DropDownListFor(model => model.Manufacturer, Model.ManufacturerList)
    </div>
    @Html.LabelFor(model => model.BikeType, new { @class = "control-label col-md-2" })
    <div class="col-md-4">
        @Html.DropDownListFor(model => model.BikeType, Model.BikeTypesList)
    </div>
</div>

@Html.Partial("GeometryTableSubView", Model.Manufacturers)

@section scripts
{
    <script>
        $(document).ready(function () {
            var dropDowns = {};
            dropDowns.a = "Manufacturer";
            dropDowns.b = "BikeType";

            var manufacturer = $('#Manufacturer option:selected').text();
            var type = $('#BikeType option:selected').text();

            for (var x in dropDowns) {
                $('#' + x).change(function () {
                    $.ajax({
                        type: "POST",
                        url: '@Url.Action("GeometrySubTable", "Home")',
                        data: { manufacturer: manufacturer, type: type },
                        success: function (response) {
                            $('#GeometryTable').html(response);
                        }
                    });
                });
            }
        });
    </script>
}
